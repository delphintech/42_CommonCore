server {
	listen 4243;
	host 127.0.0.1;
	#server_name test www.test.com;
	error_page 404 /errorpages/404.html;
	client_max_body_size 1024;
	root ./var/;    # Chemin relatif au dossier d'execution du serveur ex: /home/webser/var/
	index index.html;

	# Ajouter des en-têtes HTTP pour toutes les réponses du serveur
    add_header Access-Control-Allow-Origin *; # Permettre à tous les domaines d'accéder à la ressource
	add_header Access-Control-Allow-Headers Content-Type; # Permettre le type de contenu
	add_header Access-Control-Allow-Methods GET,POST,PUT,DELETE,OPTIONS; # Méthodes autorisées
    add_header Access-Control-Max-Age 86400; # Temps de mise en cache cote client (en secondes), c'est gere par le navigateur
	location /testHTTP {                   
		root ./html/domain2;           
		#root /var/html/domain2;           # Chemin absolu
		#root html/domain2;           # Chemin relatif au dossier d'execution du serveur ex: /home/webser/html/domain2
		#root ./html/domain2;           # Chemin relatif combine au dossier d'execution du serveur ex: /home/webser/var/html/domain2

		auto_index on;                   # directory listing
		allow_methods GET;         # allowed methods in location
		index testHTTP.html;               # default page when requesting a directory, copies root index by default
	}
	location /uploads {  
		root var;
		auto_index on;                   # directory listing
		allow_methods GET DELETE POST PUT;         # allowed methods in location
	}
		location /js {                   
		root ./html/domain2;           # root of the location. taken from the server as default
		auto_index on;                   # directory listing
		allow_methods POST GET HEAD;         # allowed methods in location
		index testHTTP.js;               # default page when requesting a directory, copies root index by default
	}
	location /favicon.ico {                   
		root ./html/domain2/img;           # root of the location. taken from the server as default
		auto_index on;                   # directory listing
		allow_methods GET;         # allowed methods in location
		index favicon.ico;               # default page when requesting a directory, copies root index by default
	}

	location /cgi-bin {
		allow_methods POST GET HEAD;     # allowed methods in location
		root var;                                                 # cgi-bin location, mandatory parameter
		cgi_path /usr/bin/php-cgi /bin/bash;                     # location of interpreters installed on the current system, mandatory parameter
		cgi_ext .php .sh;                                         # extensions for executable files, mandatory parameter
		upload_store ./cgi-bin/tmp/uploads1;							  # directory for storing temporary files
	}
	location /test {                   
		root docs/fusion_web;           # root of the location. taken from the server as default
		auto_index on;                   # directory listing
		allow_methods POST GET;         # allowed methods in location
		index index.html;               # default page when requesting a directory, copies root index by default
		return abc/index1.html;         # redirection
		alias  docs/fusion_web;         # replaces location part of URI. 
										# EX: - URI /tours           --> docs/fusion_web
										#     - URI /tours/page.html --> docs/fusion_web/page.html 
	}
	    # Location pour les fichiers image
    location ~* \.(jpg|jpeg|png|gif|ico) {
        root ./html/domain2/img;  # Chemin absolu pour les fichiers image
        autoindex off;  # Désactiver l'affichage du listing des répertoires
        allow_methods GET;  # Méthodes autorisées dans cette location
    }
	location ~* \.(php) {
		allow_methods POST GET HEAD;     # allowed methods in location
        #root var/cgi-bin/testphp;
		cgi_path /usr/bin/php-cgi /bin/bash;
		cgi_ext .php .sh;
		upload_store ./cgi-bin/tmp/uploads2;
    }

}

server {
	listen 2345;
	host 127.0.0.1;
	server_name test www.test.com;
	error_page 404 /errorpages/404.html;
	client_max_body_size 1024;
	root ./var/html/domain1;    # Chemin relatif au dossier d'execution du serveur ex: /home/webser/var/
	index index.html;
 	
	add_header Access-Control-Allow-Origin *; # Permettre à tous les domaines d'accéder à la ressource
	add_header Access-Control-Allow-Headers Content-Type; # Permettre le type de contenu
	add_header Access-Control-Allow-Methods GET,POST,PUT,DELETE,OPTIONS; # Méthodes autorisées
	add_header Access-Control-Max-Age 86400; # Temps de mise en cache cote client (en secondes), c'est gere par le navigateur
	
	location /{
		auto_index on;                   # directory listing
		allow_methods POST GET HEAD;     # allowed methods in location		
	}
	location /errorpages{
		auto_index off;                   # directory listing
		allow_methods GET;     # allowed methods in location
		root var;
	}

	location /test {                   
		root docs/fusion_web;           # root of the location. taken from the server as default
		auto_index on;                   # directory listing
		allow_methods POST GET;         # allowed methods in location
		index index.html;               # default page when requesting a directory, copies root index by default
		return abc/index1.html;         # redirection
		alias  docs/fusion_web;         # replaces location part of URI. 
										# EX: - URI /tours           --> docs/fusion_web
										#     - URI /tours/page.html --> docs/fusion_web/page.html 
	}

	location cgi-bin {
		root ./;                                                 # cgi-bin location, mandatory parameter
		cgi_path /usr/bin/python3 /bin/bash;                     # location of interpreters installed on the current system, mandatory parameter
		cgi_ext .py .sh;                                         # extensions for executable files, mandatory parameter
		upload_store /tmp/uploads;							  # directory for storing temporary files
	}
}